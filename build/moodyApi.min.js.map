{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 47f0f145253fbfc61ffb","webpack:///./src/models/article.js","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./src/services/crawler.js","webpack:///external \"axios\"","webpack:///external \"colors\"","webpack:///external \"moment-timezone\"","webpack:///./src/index.js","webpack:///external \"babel-polyfill\"","webpack:///./src/controllers/articleRouter.js","webpack:///./src/services/article.js","webpack:///./src/services/Agolo.js","webpack:///external \"cheerio\"","webpack:///external \"underscore\"","webpack:///external \"puppeteer\"","webpack:///./src/constants/index.js","webpack:///external \"http\"","webpack:///./src/utils/connectToMongo.js","webpack:///./src/cron/index.js","webpack:///external \"node-cron\"","webpack:///external \"dotenv\""],"names":["mongoose","ArticleSchema","Schema","id","Types","ObjectId","summary_title","String","summary_points","Array","site_name","site_url","article_url","original_text","original_header","summarized","Boolean","project","date_written","Article","model","crawler","articles","getUrls","url","articleListSelector","console","log","yellow","launch","args","headless","ignoreHTTPSErrors","browser","newPage","page","goto","waitUntil","timeout","content","html","$","load","articleUrls","i","length","push","attribs","href","green","bold","message","getContent","crawlParams","articlePrependUrl","articleHeaderSelector","articleDateSelector","articleTextSelector","hasWriter","hasHeader","hasDate","siteArticles","articleUrl","articleHeader","text","articleWriter","articleDate","articleText","article","date","header","writer","getAll","companies","allSitesArticles","company","siteArticlesWithInfo","name","saveAndSummarizeToDb","j","originalText","originalHeader","options","title","summary_length","coref","sort_by_salience","include_all_sentences","summarizer","summarize","summarizedArticle","query","findOneAndUpdate","upsert","error","cyan","Crawler","process","env","NODE_ENV","require","config","app","server","createServer","use","listen","PORT","articleRouter","Router","get","req","res","projectId","params","projects","set","status","send","results","find","ArticleService","agolo","summarizer_options","AgoloAxios","create","baseURL","AGOLO_URL","headers","AGOLO_API_KEY","post","response","data","summary","sentences","Agolo","COMPANY_SITES","articleWriterSelector","connectToMongo","connect","MONGO_URL","err","client","crawlContentTimes","companyCrawlJob","schedule","tz","format","start","initCronJob"],"mappings":"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","file":"moodyApi.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"api\"] = factory();\n\telse\n\t\troot[\"api\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 47f0f145253fbfc61ffb","const mongoose = require('mongoose');\n\nconst ArticleSchema = new mongoose.Schema({\n  id: mongoose.Schema.Types.ObjectId,\n  summary_title: String,\n  summary_points: Array,\n  site_name: String,\n  site_url: String,\n  article_url: String,\n  original_text: String,\n  original_header: String,\n  summarized: Boolean,\n  project: String,\n  date_written: String\n});\n\nconst Article = mongoose.model('Article', ArticleSchema);\n\nexport default Article;\n\n\n// WEBPACK FOOTER //\n// ./src/models/article.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","import axios from 'axios';\nimport Agolo from 'services/Agolo';\nimport cheerio from 'cheerio';\nimport colors from 'colors';\nimport moment from 'moment-timezone';\nimport { uniq } from 'underscore';\nimport puppeteer from 'puppeteer';\n\nimport Article from '../models/article';\nimport { COMPANY_SITES } from '../constants';\n\n// Types for Flow\ntype crawlParamsType = {\n  articleUrls: Array<string>,\n  articlePrependUrl: string,\n  articleHeaderSelector: string,\n  articleDateSelector: string,\n  articleTextSelector: string,\n  hasWriter: boolean,\n  hasHeader: boolean,\n  hasDate: boolean,\n}\n\ntype articleType = {\n  date: string,\n  header: string,\n  text: string,\n  writer: string,\n  url: string,\n}\n\ntype siteArticlesWithInfoType = {\n  siteArticles: Array<articleType>,\n  name: string,\n  url: string,\n}\n\n// Similar to agolo.js, TOOD: Refactor to type.js file in constant\ntype summarizerOptions = {\n  title: string,\n  text: string,\n  summary_length: number,\n  coref: boolean,\n  sort_by_salience: boolean,\n  include_all_sentences: boolean,\n}\n\nfunction crawler() {\n  this.articles = {\n    /**\n     * @description Gets all articleUrls from a open news web page\n     */\n    getUrls: async (url: string, articleListSelector: string) => {\n      try {\n        console.log(colors.yellow(`> [Crawling] for article Urls ${url}`));\n        const browser = await puppeteer.launch({ args: ['--no-sandbox, --disable-setuid-sandbox'], headless: true, ignoreHTTPSErrors: true });\n        const page = await browser.newPage();\n        await page.goto(url, { waitUntil: ['load', 'domcontentloaded', 'networkidle2'], timeout: 0 });\n        const html = await page.content();\n        const $ = cheerio.load(html);\n        const articles = $(articleListSelector);\n        let articleUrls: Array<string> = [];\n\n        // Push all articles into array\n        for (let i = 0; i < articles.length; i++) {\n          articleUrls.push(`${articles[i].attribs.href}`);\n        }\n\n        // Clean articles to remove duplicate links if any\n        articleUrls = uniq(articleUrls);\n        console.log(colors.green.bold(`> Found ${articleUrls.length} unique article links`));\n        return articleUrls;\n      } catch (error) {\n        console.log('> Error in crawling for article urls: ', error.message);\n      }\n    },\n    /**\n     * @description Gets article content from an article web page\n     */\n    getContent: async (crawlParams: crawlParamsType) => {\n      const {\n        articleUrls,\n        articlePrependUrl,\n        articleHeaderSelector,\n        articleDateSelector,\n        articleTextSelector,\n        hasWriter,\n        hasHeader,\n        hasDate\n      } = crawlParams;\n      let siteArticles = [];\n      for (let i = 0; i < articleUrls.length; i++) {\n        try {\n          const articleUrl = articleUrls[i];\n          console.log(colors.bold.green(`> [Scraping] article url for content: ${articlePrependUrl}${articleUrl}`));\n          const browser = await puppeteer.launch({ args: ['--no-sandbox, --disable-setuid-sandbox'], headless: true, ignoreHTTPSErrors: true });\n          const page = await browser.newPage();\n          await page.goto(`${articlePrependUrl}${articleUrl}`, { waitUntil: ['load', 'domcontentloaded', 'networkidle2'], timeout: 0 });\n          const html = await page.content();\n          const $ = cheerio.load(html);\n          const articleHeader = hasHeader ? $(articleHeaderSelector).text() : '';\n          const articleWriter = hasWriter ? $(articleHeaderSelector).text() : '';\n          const articleDate = hasDate ? $(articleDateSelector).text() : '';\n          const articleText = $(articleTextSelector).text();\n          const article: articleType = {\n            date: articleDate,\n            header: articleHeader,\n            text: articleText,\n            writer: articleWriter,\n            url: `${articlePrependUrl}${articleUrl}`,\n          }\n          // TODO: Do not push all article that are written more than 24 hours ago.\n          siteArticles.push(article);\n        } catch (error) {\n          console.log(`Error scraping url: ${articleUrls[i]}: \\n ${error.message}`);\n        }\n      }\n      return siteArticles;\n    },\n    /**\n     * @description Crawl all article urls from a list of company sites and subsequently crawl all their contents\n     */\n    getAll: async (companies: Array<any>) => {\n      let allSitesArticles = [];\n      for (let i = 0; i < companies.length; i++) {\n        try {\n          const company = companies[i];\n          const articleUrls: Array<string> = await this.articles.getUrls(company.url, company.articleListSelector);\n          const siteArticles = await this.articles.getContent({\n            articleUrls,\n            articlePrependUrl: company.articlePrependUrl,\n            articleHeaderSelector: company.articleHeaderSelector,\n            articleDateSelector: company.articleDateSelector,\n            articleTextSelector: company.articleTextSelector,\n            hasWriter: company.hasWriter,\n            hasHeader: company.hasHeader,\n            hasDate: company.hasDate,\n          });\n          const siteArticlesWithInfo: siteArticlesWithInfoType = {\n            siteArticles,\n            name: company.name,\n            url: company.url,\n          }\n          allSitesArticles.push(siteArticlesWithInfo);\n        } catch (error) {\n          console.log('> Error in getAll: ', error.message);\n        }\n      }\n      return allSitesArticles;\n    },\n    /**\n     * @description save each article from each\n     */\n    saveAndSummarizeToDb: async () => {\n      const allSitesArticles: Array<siteArticlesWithInfoType> = await this.articles.getAll(COMPANY_SITES);\n      for (let i = 0; i < allSitesArticles.length; i++) {\n        const siteArticlesWithInfo: siteArticlesWithInfoType = allSitesArticles[i];\n        const { name, url, siteArticles } = siteArticlesWithInfo;\n        for (let j = 0; j < siteArticles.length; j++) {\n          const article: articleType = siteArticles[j];\n          const originalText: string = article.text;\n          const originalHeader: string = article.header;\n          const options: summarizerOptions = {\n            title: article.header,\n            text: article.text,\n            summary_length: 10,\n            coref: false,\n            sort_by_salience: true,\n            include_all_sentences: false,\n          };\n          const { summary_title, summary_points } = await Agolo.summarizer.summarize(options);\n          const summarizedArticle = {\n            summary_title: summary_title,\n            summary_points: summary_points,\n            site_name: name,\n            site_url: url,\n            article_url: article.url,\n            original_text: originalText,\n            original_header: originalHeader,\n            summarized: true,\n            project: 'IB-III',\n            date_written: article.date,\n          };\n          const query = { article_url: summarizedArticle.article_url };\n          // Only save articles of unique article urls\n          await Article.findOneAndUpdate(query, summarizedArticle, { upsert: true }, function (error) {\n            if (error) {\n              console.log('> Error saving article:', error.message);\n            }\n            console.log(colors.bold.cyan(`> [Saving] Summarized Article to Db: ${summarizedArticle.article_url}`));\n          });\n        }\n      }\n    }\n  }\n}\n\nconst Crawler = new crawler();\nexport default Crawler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/crawler.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"colors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"colors\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"moment-timezone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment-timezone\"\n// module id = 6\n// module chunks = 0","import 'babel-polyfill';\n\nimport articleRouter from 'controllers/articleRouter';\nimport express from 'express';\nimport http from 'http';\nimport connectToMongo from './utils/connectToMongo';\nimport initCronJob from './cron';\n\nif (process.env.NODE_ENV === 'local') {\n  require('dotenv').config();\n}\n\nlet app = express();\n\n/* Creates server and web socket */\nconst server = http.createServer(app);\n\n/* Set up apps with routers and their root URLs here */\napp.use('/article', articleRouter);\n\n\n/* Initialize server locally */\nserver.listen(process.env.PORT, async (error) => {\n  if (error) {\n    console.log(`Error initializing server: ${error}`);\n  }\n  if (process.env.NODE_ENV === 'local') {\n    console.log(`> Server is ready on http://localhost:${process.env.PORT}`);\n  } else {\n    console.log('> Server is ready!');\n  }\n  await connectToMongo();\n  // Run cronjob to update DB\n  // initCronJob();\n});\n\n\n// To keep Heroku App alive\n// setInterval(function() {\n  // https.get(\"https://moody-api-poc.herokuapp.com/\");\n// }, 300000); // every 5 minutes (300000)\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 8\n// module chunks = 0","import ArticleService from 'services/article';\nimport express from 'express';\nimport Crawler from 'services/crawler'; // For test\n\nlet articleRouter = express.Router();\n\n/* Fetches the summarized articles in the last 24/7 given a project */\narticleRouter.get('/project/:projectId', async (req, res) => {\n  try {\n    const { projectId } = req.params;\n    const articles = await ArticleService.projects.get(projectId);\n    res.set({\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Credentials': true,\n      'Access-Control-Allow-Origin': '*',\n    })\n    res.status(200).send(articles);\n  } catch (error) {\n    res.status(500).send({ error: error.message });\n  }\n});\n\narticleRouter.get('/crawl/:projectId', async (req, res) => {\n  try {\n    const results = await Crawler.articles.saveAndSummarizeToDb();\n    res.status(200).send('Crawl done!');\n  } catch(error) {\n    res.status(500).send({ error: error.message });\n  }\n});\n\n\nexport default articleRouter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/articleRouter.js","import Article from '../models/article';\n\nfunction article() {\n  this.projects = {\n    getAll: async () => {\n\n    },\n    get: async (projectId: string) => {\n      console.log('> Fetching articles for project:', projectId);\n      const articles = await Article.find({ project: projectId });\n      return articles;\n    },\n  }\n}\n\nconst ArticleService = new article();\nexport default ArticleService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/article.js","//@flow\nimport axios from 'axios';\n\n// Connect to DB\n\n// Types for flow\ntype summarizerOptions = {\n  title: string,\n  text: string,\n  summary_length: number,\n  coref: boolean,\n  sort_by_salience: boolean,\n  include_all_sentences: boolean,\n}\n\nfunction agolo() {\n  this.summarizer = {\n    summarize: async (options: summarizerOptions) => {\n      // Prepare options for summarizing\n      const { title, text, summary_length, coref, sort_by_salience, include_all_sentences } = options;\n      const article = { title, text };\n      const summarizer_options = {\n        summary_length,\n        articles: [article],\n        coref,\n        sort_by_salience,\n        include_all_sentences,\n      };\n      // Request for Agolo's API\n      const AgoloAxios = axios.create({\n        baseURL: process.env.AGOLO_URL,\n        headers: {\n          'Content-Type': 'application/json',\n          'Ocp-Apim-Subscription-Key': process.env.AGOLO_API_KEY,\n        }\n      });\n      // Make request to Agolo Summarizer API & return\n      const response = await AgoloAxios.post('/', summarizer_options);\n      return ({ summary_title: response.data.title, summary_points: response.data.summary[0].sentences });\n    },\n  }\n}\n\nconst Agolo = new agolo();\nexport default Agolo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/Agolo.js","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"underscore\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"puppeteer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"puppeteer\"\n// module id = 14\n// module chunks = 0","export const COMPANY_SITES = [\n  {\n    name: 'Dubai Holding',\n    url: 'https://dubaiholding.com/en/media-hub/press-releases/',\n    articlePrependUrl: '',\n    articleListSelector: 'div.summary-wrap > h4 > a',\n    articleHeaderSelector: 'div.container > h2',\n    articleDateSelector: 'div.container > strong',\n    articleTextSelector: 'div.container > p',\n    articleWriterSelector: '',\n    hasWriter: false,\n    hasHeader: true,\n    hasDate: true,\n  },\n  {\n    name: 'Dubai Duty Free',\n    url: 'https://www.dubaidutyfree.com/media_center/news',\n    articlePrependUrl: 'https://www.dubaidutyfree.com/', // Some hrefs need to be prepended\n    articleListSelector: 'div.col-md-6.awards-blk > a.item-title',\n    articleHeaderSelector: 'span.item-title',\n    articleDateSelector: 'span.date',\n    articleTextSelector: 'div.col-md-12.awards-details > p',\n    articleWriterSelector: '',\n    hasWriter: false,\n    hasHeader: true,\n    hasDate: true,\n  },\n  {\n    name: 'du',\n    url: 'http://www.du.ae/about-us/media-centre/news',\n    articlePrependUrl: '',\n    articleListSelector: 'div.media-content > p > a.press-release-title',\n    articleHeaderSelector: 'h1.title.news-title',\n    articleDateSelector: 'p.news-date',\n    articleTextSelector: 'div.contentIn div:nth-child(6)',\n    articleWriterSelector: '',\n    hasWriter: false,\n    hasHeader: true,\n    hasDate: true,\n  },\n  {\n    name: 'Al Futtaim',\n    url: 'http://www.alfuttaim.com/home/mediacentre/News?className=AllNews&brandSelector=News&newscategory=AFGCorporate_design/MediaCentre/News/AllNews',\n    articlePrependUrl: 'http://www.alfuttaim.com',\n    articleListSelector: 'div.col-md-4.col-sm-6.col-xs-12 > a',\n    articleHeaderSelector: 'h2.news-video-details__title',\n    articleDateSelector: 'div.news-video-details__content__header',\n    articleTextSelector: 'div.news-video-details__content__detail.Description > p',\n    articleWriterSelector: '',\n    hasWriter: false,\n    hasHeader: true,\n    hasDate: true,\n  },\n  {\n    name: 'Dubai Electricity and Water Authority',\n    url: 'https://www.dewa.gov.ae/en/about-dewa/news-and-media/press-and-news/latest-news',\n    articlePrependUrl: 'https://www.dewa.gov.ae/',\n    articleListSelector: 'div.m8-teaser > a',\n    articleHeaderSelector: 'h1.text__page-title',\n    articleDateSelector: 'div.text__content-subcopy',\n    articleTextSelector: 'div.m14-richtext > p',\n    articleWriterSelector: '',\n    hasWriter: false,\n    hasHeader: true,\n    hasDate: true,\n  }\n  // USING RSS FROM GOOGLE NEWS ALERT - The article sites have routing problem.\n  // {\n  //   url: 'http://www.empower.ae/news.php',\n  //   articlePrependUrl: 'http://www.empower.ae/',\n  //   articleListSelector: '#news > p > a',\n  //   articleHeaderSelector: 'h3',\n  //   articleDateSelector: 'i',\n  //   articleTextSelector: 'div.col-lg-8.col-md-8.col-sm-8 p:nth-child(5)',\n  //   articleWriterSelector: '',\n  //   hasWriter: false,\n  //   hasHeader: true,\n  //   hasDate: true,\n  // },\n]\n\n\n// WEBPACK FOOTER //\n// ./src/constants/index.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 16\n// module chunks = 0","import mongoose from 'mongoose';\nimport Article from '../models/article';\n\nfunction connectToMongo() {\n  mongoose.connect(process.env.MONGO_URL, async function (err, client) {\n    if (err) {\n      console.log('> Error connecting to DB:', err.message);\n    }\n    console.log('> Successfully connected to mongoDB');\n  });\n}\n\nexport default connectToMongo;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/connectToMongo.js","// Cronjob for crawling and summarizing articles\nimport colors from 'colors';\nimport Crawler from 'services/crawler';\nimport cron from 'node-cron';\nimport crawler from '../services/crawler';\nimport moment from 'moment-timezone';\n\nasync function initCronJob() {\n  /* Seconds, minutes, hours, day of month, months, day of week */\n  let crawlContentTimes = '00 00 07 * * *';\n  // let crawlContentJob = new CronJob(crawlContentTimes, () => crawler.articles.saveAndSummarizeToDb(), null, true, 'America/New_York');\n  // const companyCrawlJob = new cron.CronJob({\n  //   cronTime: '00 00 07 * * *',\n  //   onTick: () => crawler.articles.saveAndSummarizeToDb(),\n  //   start: true,\n  //   timeZone: 'America/New_York'\n  // });\n  // companyCrawlJob.start();\n  // console.log('> Company crawl job status:', companyCrawlJob.running);\n  const companyCrawlJob = cron.schedule('* * 07 * *', function () {\n    console.log(`> Starting daily crawl at: ${moment().tz('America/New_York').format('LLLL')}`);\n    crawler.articles.saveAndSummarizeToDb();\n  }, false);\n  companyCrawlJob.start();\n}\n\nexport default initCronJob;\n\n\n// WEBPACK FOOTER //\n// ./src/cron/index.js","module.exports = require(\"node-cron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-cron\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 20\n// module chunks = 0"],"sourceRoot":""}